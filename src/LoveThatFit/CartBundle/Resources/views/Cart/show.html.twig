{% extends 'LoveThatFitCartBundle::basecart.html.twig' %}

{% block profile_heading %}
    <div id="breadcrumb">
        <ul>
            <li class="active"><a href="#">Shopping Cart</a></li>
            <li class="bd_sep">>></li>
            <li><a href="#">Delivery &amp; Shopping</a></li>
             <li class="bd_sep">>></li>
            <li><a href="#">Billing Methods</a></li>
        </ul>
    </div><br>
    <h1 class="cart_hd">Shopping Cart</h1>
{% endblock %}
{% block profile_section %}
    {% if app.session.hasFlash('warning') %}
        <div class="alert alert-error" style="text-align: center;color:#ff0000">
            {{ app.session.flash('warning') }}
        </div>
    {% endif %}
    {% if app.session.hasFlash('success') %}
        <div class="success_alert">
            {{ app.session.flash('success') }}
        </div>
    {% endif %}

<script type="text/javascript">

    $(document).ready(function() {
        $('#cart').validate({ // initialize plugin within DOM ready
            // other options,
            rules: {
                'qty[]': {
                    required: true,
                    min:1,
                    number: true
                }
            }
        });

    });
</script>
    <table width="745" border="1" class="cart_tbl" cellpadding="0" cellspacing="0">
        <tr>
            <td>Image</td>
            <td>SKU</td>
            <td>Product</td>
            <td>Quantity</td>
            <td>Unit Price</td>
            <td>Sub Total</td>
            <td>Actions</td>

        </tr>
        <form method="post" action="{{ path('cart_basket_update')}}" id="cart" onsubmit="return validates();">
            {% for c in cart %}
            <tr>
                <td align="center" valign="middle"><img src="{{ asset(c.productItem.productColor.webPath) }}"></td>
                <td>{{ c.productItem.sku}}</td>
                <td align="left" width="20%">{{ c.productItem.product.brand.name}} {{ c.productItem.product.name}} {{ c.productItem.productColor.title}} {{ c.productItem.productSize.title}}</td>
                <td align="center" >
                    <input type="hidden" name="id[]" value="{{ c.id }}">
                    <input type="hidden" id="product_item" name="product_item[]" value="{{ c.productItem.id }}"> 
                    <input id="quantity_box" type="text" name="qty[]" value="{{ c.qty }}" size="4" required="required" style="width: 30px;" data-min="1" > 
                    <input id="update_btn" type="image" title="Update Quantity" src="{{ asset('bundles/lovethatfit/site/images/update_icon.png') }}" >             
                </td>
                <td align="center">${{ c.productItem.price}}</td>
                <td align="center">${{ c.productItem.price * c.qty}}</td>

                <td align="center">
                    <ul class="cart_act" >
                       
                        
                     
                      
                        <li>
                    <!-- <input type="button" style="background: #426eb6 none repeat scroll 0 0;color:#fff;padding:5px 20px" value="Add to Wishlist">-->
                    <input style="border:none;" type="image" title="Add to Wish List" src="{{ asset('bundles/lovethatfit/site/images/wishlist_icon.png') }}">
                        </li>
                        
                           <li>|</li>
                        
                         <li>
                    <a onclick="return confirm('Are you sure you want to remove this product?')" href="{{ path('cart_delete', {'id': c.id}) }}" title="Delete">  <img alt="Delete" src="{{ asset('bundles/lovethatfit/site/images/delete_icon.png') }}"></a>
                        </li>
                    </ul>
                    </td>

            </tr>

            {% endfor %}
            {% if(grand_total!=0) %}
            <tr>
                <td colspan="7" align="right">
                    
                    <div class="cart_total">
                    <div style="float:left;"> Total:</div>
                    <div style="float:left; margin-left: 10px;"><strong>${{ grand_total }}<input type="hidden" name="order_amount" value="{{ grand_total }}"> </strong></div>
                    </div>
                </td></tr>
            {% endif %}
                {% if(itemscounter != 0 ) %}
                <tr>
                    <td colspan="7" align="right" style="text-align: right;">
                    <a href="{{path('inner_site_index')}}" class="update_btn">Continue Shopping</a>                   
                    <input style="margin-left:0px" class="checkout_btn" type="submit" name="checkout" value="Proceed to Checkout"></td></tr>
            {% else %}
                <tr>
                    <td align="center" colspan="6">
                        <p class="no_item_wrapper">
                            Currently there are no items in the cart.
                             <div class="add_prod">
                                 <a href="{{path('inner_site_index')}}">Click here to add items</a>
                             </div>
                            
                        </p>
                    </td>
                </tr>
            {% endif %}

        </form>
    </table>

{% endblock %}