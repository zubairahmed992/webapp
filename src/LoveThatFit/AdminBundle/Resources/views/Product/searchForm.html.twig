 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
 function SearchForm(){
var brand=$('#brand').val();

var category = []
   $("#category_select:checked").each(function() {
       category.push($(this).val());
   });

var genders = []
   $("#genders:checked").each(function() {
       genders.push($(this).val());
   });

var target = []
   $("#target:checked").each(function() {
       target.push($(this).val());
   });

$.ajax({
        type:'POST',
        url: $('#url').text(),
        data: {brand: brand, category: category,genders:genders,target:target},  
        success: function(response) {
       console.log(response);
       $('#searchResult').empty('');
       $('#searchResult').append(response);
       
    }});
    return false;
}

function getTargetCategory(){

var category = []

   $("#category:not(:checked)").each(function() {
       category.push($(this).val());
   });
var target = []
   $("#target:checked").each(function() {
       target.push($(this).val());
   });
    if(target){
       $.ajax({
       type:'POST',
       url: $('#url_target').text(),
       data: {target:target},  
       dataType: 'json',
       success: function(ar) {
           
     $('#category_empty').empty('');
     
     if(ar.length>0){
    
     var playlist=[];
     playlist.push.apply(playlist, ar);
     for(i=0;i<playlist.length;i++){
       
     if(inArray(playlist[i]['id'],category)=="test"){
     
       $('<input />', { type: 'checkbox', id: 'category_select', value: playlist[i]['name'] }).appendTo('#category_empty');
         $('<label />', { 'for': 'playlist', text:playlist[i]['name'] }).appendTo('#category_empty');
    }else{
       $("#category").attr("disabled", true);
       alert(playlist[i]['id']);
       
    }
    }
    
    }else{
 $('#category_empty').empty('');
  $('#all_category').show();

}}});
    return false; 


   }
}
function inArray(needle, haystack) {
    var length = haystack.length;
    
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) 
        return "test";
    }
   
}
 </script>
 <span id="url" style="display:none;">{{path('admin_product_search_result')}}</span>
 <span id="url_target" style="display:none;">{{path('admin_product_search_category_with_target')}}</span>
<table style="border:1px solid #999999;" align="center" width="25%" id="searchForm">
    <th> Search Product:</th>   
    <tr>
        <td>Brand:</td>
        <td><select name="brand" id="brand">
 {% for b in brandList %}
        <option value="{{b.id}}">{{b.name}}</option> 
{%endfor%}        

</select>
            </td>
    </tr>
  <tr>
      <td>Genders:</td>
      <td>{% for g in genders %}
          <input type="checkbox" name="genders" id="genders" value="{{g|capitalize}}" >{{g|capitalize}}
{%endfor%}  
      </td>
  </tr>
  
 <tr>
      <td>Target:</td>
      <td >
       {% for t in target %}
 <input type="checkbox" name="target" id="target" value="{{t|capitalize }}" onclick="getTargetCategory()">{{t|capitalize }}
      {%endfor%}  
      </td>
  </tr>
  <tr>
<td>Category:</td>
<td id="all_category" style="display:none;">
 {% for c in category %}
 <input type="checkbox" name="category" id="category" value="{{c.id}}">{{c.name}}
{%endfor%}        
</td>
<td id="category_empty">
 {% for c in category %}
 <input type="checkbox" name="category_select" id="category_select" value="{{c.id}}">{{c.name}}
{%endfor%}        
</td>
  </tr>
  <tr>
      <td>Search</td>
      <td><input type="button" value="Search" onclick="SearchForm()"></td>
  </tr> 

</table>
 <div id="searchResult"></div>
 
