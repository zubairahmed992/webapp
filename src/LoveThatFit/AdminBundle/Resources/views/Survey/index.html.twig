{% extends 'LoveThatFitAdminBundle::base.html.twig' %}
{% block breadcrumb %}
<li class="active">Survey</li>
{% endblock %}
{% block body %}
<div class="p_listing">     
    <h1 style="float:left;">Survey</h1>
    <div class="btn_wrapper">
        <h5>Add New Question</h5>     
        <form action="{{ path('admin_survey_add_new_question') }}" method="post" {{ form_enctype(addNewForm) }}>
      {{ form_widget(addNewForm) }} 
                <input type="submit" value="Add Question" />
            </form>
        </div>   
   {%if(count_question>0)%} 
    <div class="clearfix"></div>
        <div class="row-fluid show-grid">
            <div class="span3 hds">ID</div>
            <div class="span3 hds">Question</div> 
            <div class="span3 hds">Status</div>           
            <div class="span3 hds">&nbsp;</div>     
        </div>
        <ul>
{% for item in data %}
                <li style="list-style:none">
                    <table width="100%">
                        <tr>
                        {%if(operation=='editQuestion' and id==item.id)%}
                    <div class="row-fluid show-grid">
                        <form action="{{ path('admin_survey_edit_update_question',{'question_id':id})}}"  method="post" {{ form_enctype(editForm) }}>
                            <div align="center">
          {{ form_widget(editForm) }}
                                </div>          
                                <div align="center">
                                    <input type="submit" value="Submit" style="margin-left:30px"  />
                                    <a href="{{ path('admin_survey')}}" style="text-decoration:none;">
                                        <input type="submit" value="Cancel"  /></a>
                                </div>
                            </form>
                        </div> 
      {%else%}
            <td width="34%" style="padding-left:134px"><b>{{item.id}}</b></td>
        <td width="45%" style="padding-left: 7px;">
       <b>{{item.question}}</b>
       <span style="float: right;font-weight: bold;padding-right: 180px;">
       {%if(item.questionstatus==1)%} Enabled {%else%} Disabled {%endif%}
      </span>
     </td>
            
            <td width="21%"><a href="{{ path('admin_survey_edit_question', {'question_id':item.id}) }}"><i class="icon-edit"></i></a>
            <a href="#myModal{{item.id}}" role="button" data-toggle="modal">
            <i class="icon-remove"></i></a>
            <a href="{{ path('admin_survey_add_new_answer', {'question_id':item.id}) }}" class="btn">Add Answer</a></td>
      {%endif%}                   
                        </tr>
                    </table>
{% for a in item.answers %}
                    <ul>
                        <li style="list-style:none">
                            <table width="84%" align="center">
                                <tr>
                             
                      {%if(operation=='editAnswer' and id==a.id)%}
                <div class="row-fluid show-grid">
                    <form action="{{ path('admin_survey_edit_update_answer',{'answer_id':id})}}"  method="post" {{ form_enctype(editAnswerForm) }}>
                        <div align="center">
          {{ form_widget(editAnswerForm) }}
                            </div>          
                            <div align="center">
                                <input type="submit" value="Submit" style="margin-left:30px" />             
                                <a href="{{ path('admin_survey')}}" style="text-decoration:none;">
                                    <input type="submit" value="Cancel"  /></a>
                            </div>
                        </form>
                    </div>  
{%else%}              <td width="60%" style="padding-left: 348px;">
                        {{a.answer}}
                            </td>
                              <td width="40%" style="float:right;">
                                  <a href="{{ path('admin_survey_edit_answer', {'answer_id':a.id}) }}"><i class="icon-edit"></i></a>
                              <a href="#myModal1{{a.id}}" role="button" data-toggle="modal"><i class="icon-remove"></i></a> </td>
{%endif%}  
                                </tr>
                            </table>

                        </li>

                    </ul>

                </li>
                <div id="myModal1{{a.id}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h3 id="myModalLabel">Delete Question</h3>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to Delete this Answer <b>{{a.answer}}</b>?</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                        <a href="{{ path('admin_survey_delete_answer', {'answer_id':a.id}) }}"  class="btn btn-primary">Delete</a>

                    </div>
                </div>
{%endfor%}
 {%if(operation=='AddAnwser' and question_id==item.id)%}
                        <div class="row-fluid show-grid">
                            <form action="{{ path('admin_survey_add_answer',{'question_id':question_id})}}" method="post" {{ form_enctype(answerForm) }}>
                                <div align="center">
          {{ form_widget(answerForm) }}
                                    </div>          
                                    <div align="center">
                                        <input type="submit" value="Add Answer" style="margin-left:30px" />             
                                        <a href="{{ path('admin_survey')}}" style="text-decoration:none;">
                                        <input type="submit" value="Cancel"  /></a>
                                    </div>
                                </form>
                            </div> 
 {%endif%}  


                            <div id="myModal{{item.id}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                    <h3 id="myModalLabel">Delete Question</h3>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure you want to Delete this Question <b>{{item.question}}</b>?</p>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                                    <a href="{{ path('admin_survey_delete_question', {'question_id':item.id}) }}"  class="btn btn-primary">Delete</a>

                                </div>
                            </div>          

{%endfor%}
                   </ul>
{%else%}
    <div>No Question Found Please Add Question</div>
{%endif%}
                    </div>
 {% endblock %}