{% extends 'LoveThatFitAdminBundle::base.html.twig' %}
{% block breadcrumb %}
<li class="active">Masked Marker Inspection</li>
{% endblock %}

{% block body %}
<form action="{{ path('admin_mask_marker_inspect_index')}}" method="post" {{ form_enctype(form) }}>
    <div class="row-fluid show-grid">
        <div class="span3">User</div>
        <div class="span4">{{ form_widget(form.User) }}{{ form_errors(form.User) }}
            &nbsp;<input type='checkbox' name='chk_json' id='chk_json' value="json"> JSON
            &nbsp;|&nbsp;<input type='checkbox' name='chk_path_axis' id='chk_path_axis' value="chk_path_axis"> axis
        </div>
        
    </div>
</form>                               

<div id ='summary_ajax'></div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
       
$(document).ready(function(){
    
$( "select[id='user_User']" ).change(function() {
    var chk_json = document.getElementById('chk_json');
    var chk_path_axis = document.getElementById('chk_path_axis');
    var mode = chk_json.checked?chk_json.value:null;
    var user_id = $("#user_User").val();   
    var user_url = "../mask_marker_inspect/user/" + user_id+"/"+mode;         

    if(chk_json.checked){
        window.open(user_url);
    }else if(chk_path_axis.checked){
        window.open("../mask_marker_inspect/path_axis/" + user_id);        
    }else{
        $.ajax({
             url: user_url
             ,success: function(response) {
                $('#summary_ajax').html(response);
             }
          })
    }
      return false; 
    });

});        

    </script>
{% endblock %}