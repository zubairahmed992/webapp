{% extends 'LoveThatFitAdminBundle::base.html.twig' %}
{% block breadcrumb %}
<li class="active">Web Services Client</li>
{% endblock %}



{% block body %}

<div class="p_listing">     
    <h3>Web Services Client</h3>
    <form class="form-inline">
        <div class="form-group">
            <label for="sel_service">Service</label>
            <select id="sel_service" class="form-control">
                <option>select</option>
                {% for k,v in services %}
                <option value="{{v['pattern']}}">{{ k }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="sel_user">User</label>
            <select id="sel_user" class="form-control">
                <option>select</option>
                {% for k,v in users  %}
                <option value="{{v.authToken}}">{{ v.email }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="checkbox">
            <label>
                <input id="chk_new_window" type="checkbox"> New
            </label>
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
    </form>
<br>

    
<script type="text/javascript" src="{{ asset('bundles/lovethatfit/site/js/jquery-1.8.3.min.js') }}"></script> 
<script  type='text/javascript'>
//-------------------------------------------------------
{% autoescape false %};
var j = '{{ services|json_encode()}}';
var obj = JSON.parse(j);
{% endautoescape %}
        
//-------------------------------------------------------
//------------- service dropdownlist --------------------------

$("#sel_service").change(function() {    
  alert(find_pattern($('option:selected', this).html()));  
});

//------------------- user dropdownlist --------------------
$("#sel_user").change(function() {  
  alert($('option:selected', this).html());  
});

    
  //--------------------------------------------------
 function find_pattern(service_name){    
    obj = find_service_obj(service_name);
    return obj.pattern;    
} 
//--------------------------------------------------
function find_service_obj(service_name){    
    for(var key in obj)
       if(key==service_name)
            return obj[key];                     
}
    
    
    </script>



{% endblock %}
