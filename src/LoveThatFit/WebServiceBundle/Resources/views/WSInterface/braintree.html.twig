<style>
    #checkout-form .hosted-field iframe {
        height: 5%;
    }
</style>
<form id="checkout-form" action="/nws/braintree_processuser_transaction" method="post">
    <div id="error-message"></div>

    <label for="card-number">Card Number</label>
    <div class="hosted-field" id="card-number"></div>

    <label for="cvv">CVV</label>
    <div class="hosted-field" id="cvv"></div>

    <label for="expiration-date">Expiration Date</label>
    <div class="hosted-field" id="expiration-date"></div>

    <input type="hidden" name="payment_method_nonce">
    <input type="text" name="auth_token" value="5e7412290e4f84201e0cdf3c44297ed0">
    <input type="hidden" name="billing[billing_first_name]" value="geof">
    <input type="hidden" name="billing[billing_last_name]" value="anton">
    <input type="hidden" name="billing[company]" value="Braintree">
    <input type="hidden" name="billing[billing_address1]" value="639 State Street">
    <input type="hidden" name="billing[billing_address2]" value="639 State Street">
    <input type="hidden" name="billing[billing_phone]" value="123334">
    <input type="hidden" name="billing[billing_city]" value="Madison">
    <input type="hidden" name="billing[billing_postcode]" value="53703">
    <input type="hidden" name="billing[billing_country]" value="US">
    <input type="hidden" name="billing[billing_state]" value="WI">
    <input type="hidden" name="billing[shipping_first_name]" value="geof">
    <input type="hidden" name="billing[shipping_last_name]" value="anton">
    <input type="hidden" name="billing[shipping_address1]" value="639 State Street">
    <input type="hidden" name="billing[shipping_address2]" value="639 State Street">
    <input type="hidden" name="billing[shipping_phone]" value="123334">
    <input type="hidden" name="billing[shipping_city]" value="Madison">
    <input type="hidden" name="billing[shipping_postcode]" value="53703">
    <input type="hidden" name="billing[shipping_country]" value="US">
    <input type="hidden" name="billing[shipping_state]" value="WI">
   {# <input type="hidden" name="items[0][item_id]" value="4126">
    <input type="hidden" name="items[0][quantity]" value="1">
    <input type="hidden" name="items[0][unit_price]" value="30">
    <input type="hidden" name="items[1][item_id]" value="4127">
    <input type="hidden" name="items[1][quantity]" value="1">
    <input type="hidden" name="items[0][unit_price]" value="30">#}

    <input type="hidden" name="rates[shipping_rate_amount]" value="6.83">
    <input type="hidden" name="rates[amount]" value="0">
    <input type="hidden" name="rates[deliverDays]" value="3">
    <input type="hidden" name="rates[shipDate]" value="2017-10-30">
    <input type="hidden" name="rates[deliveryDate]" value="2017-11-02">
    <input type="hidden" name="rates[serviceType]" value="US-PS">
    <input type="hidden" name="rates[FromZIPCode]" value="53202">
    <input type="hidden" name="rates[ToZIPCode]" value="53703">
    <input type="hidden" name="rates[DeliverDays]" value="3">
    <input type="hidden" name="rates[WeightOz]" value="56.3">
    <input type="hidden" name="rates[InsuredValue]" value="0">
    <input type="hidden" name="rates[RectangularShaped]" value="false">
    <input type="hidden" name="group_type" value="2">



    <input type="hidden" name="shipping_amount" value="0">
    <input type="hidden" name="billing_id" value="332">
    <input type="hidden" name="shipping_id" value="333">
    <input type="hidden" name="order_amount" value="104">
    <input type="hidden" name="discount_amount" value="0">
    <input type="hidden" name="total_amount" value="104">
    <input type="hidden" name="sales_tax" value="5.72">
    {#<input type="hidden" name="order_date" value="2017-05-28 10:05:10">#}
    <input type="submit" value="Pay $10" disabled>
</form>

<!-- Load the Client component. -->
<script src="https://js.braintreegateway.com/web/3.6.3/js/client.min.js"></script>

<!-- Load the Hosted Fields component. -->
<script src="https://js.braintreegateway.com/web/3.6.3/js/hosted-fields.min.js"></script>

<script>
    // We generated a client token for you so you can test out this code
    // immediately. In a production-ready integration, you will need to
    // generate a client token on your server (see section below).
    var authorization = 'eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiJmYzhiMWMxNTg2ZDY4YjM5Y2EzNTlmZTBjY2NkZTM0ODFhODc0NDBjZDA3OWNjMjRjY2Q5ZTZmY2Y1NmU0YjlhfGNyZWF0ZWRfYXQ9MjAxNy0xMC0zMVQxMDozMzo0NS44NTU3NjgyMTMrMDAwMFx1MDAyNmN1c3RvbWVyX2lkPTM5MDFcdTAwMjZtZXJjaGFudF9pZD05OTl4dGJxYzJzNTVieDljXHUwMDI2cHVibGljX2tleT1qZzJ6Nzd0M2prcDQzajhnIiwiY29uZmlnVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzLzk5OXh0YnFjMnM1NWJ4OWMvY2xpZW50X2FwaS92MS9jb25maWd1cmF0aW9uIiwiY2hhbGxlbmdlcyI6WyJjdnYiXSwiZW52aXJvbm1lbnQiOiJzYW5kYm94IiwiY2xpZW50QXBpVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzLzk5OXh0YnFjMnM1NWJ4OWMvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tIiwiYW5hbHl0aWNzIjp7InVybCI6Imh0dHBzOi8vY2xpZW50LWFuYWx5dGljcy5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tLzk5OXh0YnFjMnM1NWJ4OWMifSwidGhyZWVEU2VjdXJlRW5hYmxlZCI6ZmFsc2UsInBheXBhbEVuYWJsZWQiOnRydWUsInBheXBhbCI6eyJkaXNwbGF5TmFtZSI6ImFiYyIsImNsaWVudElkIjoiQVpIR3otSnVZM2hsRzNILURZNmUzTlQyaTJTR0RJNmtISnp0N3dpVm5oRFNNWmEwT0JRS1ZxTGI5OEY3UUplcXo3cm9peUxCWUZxVG5ZVXIiLCJwcml2YWN5VXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL3BwIiwidXNlckFncmVlbWVudFVybCI6Imh0dHA6Ly9leGFtcGxlLmNvbS90b3MiLCJiYXNlVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhc3NldHNVcmwiOiJodHRwczovL2NoZWNrb3V0LnBheXBhbC5jb20iLCJkaXJlY3RCYXNlVXJsIjpudWxsLCJhbGxvd0h0dHAiOnRydWUsImVudmlyb25tZW50Tm9OZXR3b3JrIjpmYWxzZSwiZW52aXJvbm1lbnQiOiJvZmZsaW5lIiwidW52ZXR0ZWRNZXJjaGFudCI6ZmFsc2UsImJyYWludHJlZUNsaWVudElkIjoibWFzdGVyY2xpZW50MyIsImJpbGxpbmdBZ3JlZW1lbnRzRW5hYmxlZCI6dHJ1ZSwibWVyY2hhbnRBY2NvdW50SWQiOiJhYmMiLCJjdXJyZW5jeUlzb0NvZGUiOiJVU0QifSwibWVyY2hhbnRJZCI6Ijk5OXh0YnFjMnM1NWJ4OWMiLCJ2ZW5tbyI6Im9mZiJ9';
    var form = document.querySelector('#checkout-form');
    var submit = document.querySelector('input[type="submit"]');

    braintree.client.create({
        authorization: authorization
    }, function (clientErr, clientInstance) {
        if (clientErr) {
            // Handle error in client creation
            return;
        }

        braintree.hostedFields.create({
            client: clientInstance,
            styles: {
                'input': {
                    'font-size': '14pt'
                },
                'input.invalid': {
                    'color': 'red'
                },
                'input.valid': {
                    'color': 'green'
                }
            },
            fields: {
                number: {
                    selector: '#card-number',
                    placeholder: '4111 1111 1111 1111'
                },
                cvv: {
                    selector: '#cvv',
                    placeholder: '123'
                },
                expirationDate: {
                    selector: '#expiration-date',
                    placeholder: '10/2019'
                }
            }
        }, function (hostedFieldsErr, hostedFieldsInstance) {
            if (hostedFieldsErr) {
                // Handle error in Hosted Fields creation
                return;
            }

            var elements = document.getElementsByTagName("iframe")
            submit.removeAttribute('disabled');

            form.addEventListener('submit', function (event) {
                event.preventDefault();

                hostedFieldsInstance.tokenize(function (tokenizeErr, payload) {
                    if (tokenizeErr) {
                        // Handle error in Hosted Fields tokenization
                        return;
                    }

                    // Put `payload.nonce` into the `payment-method-nonce` input, and then
                    // submit the form. Alternatively, you could send the nonce to your server
                    // with AJAX.
                    // console.log( payload ); return;
                    document.querySelector('input[name="payment_method_nonce"]').value = payload.nonce;
                    form.submit();
                });
            }, false);

            for( ele in elements){
                if( elements[ele].style.height !== undefined )
                    elements[ele].style.height = "5%";
            }
        });
    });
</script>