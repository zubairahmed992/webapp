{% extends 'LoveThatFitAdminBundle::base.html.twig' %}
{% block breadcrumb %}
   <li class="active">Products</li>
{% endblock %}

{% block header_right_links %}
   <a href="{{ path('admin_algorithm_comparison') }}" >Comparison</a> | <a href="{{ path('admin_algorithm_avg') }}" >Fit Model</a>
<br>
    
     <a href="{{ path('admin_product_data') }}" >Product Data</a> | <a href="{{ path('admin_product_stats') }}" >Product Stats</a> 

{% endblock %}

{% block body %}

    <h1>Upload Product CSV File to update SKU</h1>  
      <div class="clearfix"></div>       
          
          <div id="detail_wrapper">      
              <div id="product_content">
                          <form id='csv_upload' action="{{path('shopify_data_sku_upload')}}" method="post" {{ form_enctype(form) }}>        
                          <div class="edt_container">     
                               <div class="row-fluid show-grid">
                                  <div class="span3">Select CSV File</div>
                                  <div class="span3">{{ form_widget(form.csvfile) }}{{ form_errors(form.csvfile) }}</div>
                              </div>
                              <div class="span3">
                                  <div style="margin:0px 0px 0px 0px;"> 
                                      <input type="submit" value="Upload" class="btn btn-large btn-primary"/>
                                  </div>                                    
                              </div>                                
                          </div> 
                              </form>
                      
                  
              </div><!-- End pro_detail -->      
          </div><!-- End product_content --> 

          <div id='summary' name='summary'>
          
          </div>
          <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
            <script type="text/javascript">
                
      
$("#csv_upload").submit(function(e)
{
      var formObj = $(this);
    var formURL = formObj.attr("action");
    var formData = new FormData(this);
    $.ajax({
        url: formURL,
    type: 'POST',
        data:  formData,
    mimeType:"multipart/form-data",
    contentType: false,
        cache: false,
        processData:false,
    success: function(data, textStatus, jqXHR)
    {
        $("#summary").html(data);
    },
     error: function(jqXHR, textStatus, errorThrown) 
     {
     }          
    });
    e.preventDefault(); //Prevent Default action. 
    e.unbind(); //unbind. to stop multiple form submit.
});
   
  </script>    
 {% endblock %}
