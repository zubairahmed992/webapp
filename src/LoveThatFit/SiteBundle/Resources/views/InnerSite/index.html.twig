{% extends 'LoveThatFitSiteBundle::base.html.twig' %}

{% block left_navigation %}

<nav>
    <ul>
        <li><a href="{{path('ajax_product_latest',{'gender' : app.user.gender })}}"><span></span>What's New</a></li>
        <li><a href="{{path('ajax_product_latest',{'gender' : app.user.gender })}}"><span></span>What's Hot<span class="mnu"></span></a></li>
        <li><a href="#"><span></span>Shop by Style</a>
            {% render 'LoveThatFitSiteBundle:InnerSite:brands' %}
        </li>
        <li class="opn_link"><a href="#"><span></span>Shop by Brand <span class="mnu"></span></a>
            {% render 'LoveThatFitSiteBundle:InnerSite:clothingTypes' %}                     
        </li>
    </ul>
</nav>
{% endblock %}

{% block left_col_btm %}
{% endblock %}

{% block product_slider %}
<section class="products">
    <div class="prod_slider_hldr">
        <div class="slider_but_top click_able_top"></div>
        <div class="prod_sliding_area">
            <div class="int_fitting_room">
                <a href="{{ path('registration_step_four_edit') }}" class="edit_photo">Edit Photo</a>
                <div id="full_dropable" class="hide"></div>
                <div id="top_dropable" class="hide"></div>
                <div id="bottom_dropable" class="hide"></div>
                
                <div id="user_dummy_img_hldr"><img class="user_dummy_img" src="{{ asset(app.user.getWebPath) }}"></div>
            </div> 
            <div class="play_area_hldr hide">
                <div id="play_area" class="play_area">
                    <div id="top_layer"></div>
                    <div id="dummy_mark"></div>
                    <div id="uploaded_photo" class="full_opacity"></div>
                </div>
                <!--/.play_area_hldr--></div>


          <div id="slider_dis_canv">
            <ul class="prod_wrapper">   
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_top" src="{{ asset('bundles/lovethatfit/site/products/tops/jacket.png') }}" width="63" height="108">
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="160" />
                                    <input type="hidden" class="prod_width" value="120" />
                                    <input type="hidden" class="prod_for_dummy" value="bundles/lovethatfit/site/images/featured_img_bigger.png" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_top" src="{{ asset('bundles/lovethatfit/site/products/tops/jacket_1.png') }}" width="63" height="108">
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="160" />
                                    <input type="hidden" class="prod_width" value="120" />
                                    <input type="hidden" class="prod_for_dummy" value="bundles/lovethatfit/site/images/featured_img_bigger.png" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 

                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_bottom" src="{{ asset('bundles/lovethatfit/site/products/bottoms/jeans.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="210" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 
                
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_full" src="{{ asset('bundles/lovethatfit/site/products/dress/dress.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="310" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li>
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_bottom" src="{{ asset('bundles/lovethatfit/site/products/bottoms/jeans_1.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="210" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 
                
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_full" src="{{ asset('bundles/lovethatfit/site/products/dress/dress.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="310" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li>
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_bottom" src="{{ asset('bundles/lovethatfit/site/products/bottoms/jeans.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="210" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 
                
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_full" src="{{ asset('bundles/lovethatfit/site/products/dress/dress.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="310" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li>
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_bottom" src="{{ asset('bundles/lovethatfit/site/products/bottoms/jeans.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="210" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li> 
                
                <li>
                    <div class="prod_node">
                        <span></span>
                        <div class="featured_box">                
                            <div class="featured_content">

                                <h3>Athletic Tops</h3>
                                <p>All sizes Available<br />
                                    All colors Available</p>
                                <div class="pro_price">$29.99 - $69.99</div>
                            </div>
                            <div class="featured_img">
                                <img class="prod_full" src="{{ asset('bundles/lovethatfit/site/products/dress/dress.png') }}" />
                                <div class="prod_details">
                                    <input type="hidden" class="prod_height" value="310" />
                                    <input type="hidden" class="prod_width" value="100" />
                                </div>
                            </div>              
                        </div>
                        <span></span>
                        <!--/prod_node--></div>
                </li>
                 

            </ul>
            <!--.prod_sliding_area--></div>
        <!---/#dis canv---></div>
        <div class="slider_but_btm click_able_btm"></div>
        <!--/.prod_slider_hldr--></div>
</section>

{% endblock %}

{% block fitting_room %}
<script>
    
//--Slider--//
    
function set_slider_buttons(){
  if($("#slider_dis_canv").scrollTop() == 0){
      $(".slider_but_top").removeClass("click_able_top").addClass("disable_me_top");
      //alert("top_disabled now");
  }
  else {
      $(".slider_but_top").removeClass("disable_me_top").addClass("click_able_top");
  }
  if($("#slider_dis_canv").scrollTop() >= $("#slider_dis_canv ul.prod_wrapper").height() - 534){
      $(".slider_but_btm").removeClass("click_able_btm").addClass("disable_me_btm");
      //alert("bottom_disabled now");
  }
  else {
      $(".slider_but_btm").removeClass("disable_me_btm").addClass("click_able_btm");
  }
}
$(document).ready(function(){
  set_slider_buttons();
});
var scroll_heighting = 534;
    $(".click_able_top").click(function (){
        $("#slider_dis_canv").animate({"scrollTop" : "-=" + scroll_heighting}, 1200, "swing", function (){set_slider_buttons();} );
        
    });
    $(".click_able_btm").click(function (){
        $("#slider_dis_canv").animate({"scrollTop" : "+=" + scroll_heighting}, 1200, "swing", function (){set_slider_buttons();} );
        
    });
    
    
    
    
    //---Function to check drag limit and set revert---//
    
    function product_drag_limit_check(prod_type){
        var prod_axis = $(prod_type).offset();

        if(prod_axis.left < $(prod_type).parent().offset().left - 30 || prod_axis.left > $(prod_type).parent().offset().left + 30 || prod_axis.top < $(prod_type).parent().offset().top - 30 || prod_axis.top > $(prod_type).parent().offset().top + 30){
            $( prod_type ).draggable( "option", "revert", false )
        }
        else{
            $( prod_type ).draggable( "option", "revert", true )
        }
    }
    
    //---Function to check position and remove applied product---//
    function remove_product_applied (prod_type){
        //alert($( prod_type ).css("left"));
        if($( prod_type ).css("left") != "0px" || $( prod_type ).css("top") != "0px" ){
            $( prod_type).fadeOut(300, function (){$(prod_type).parent().addClass("hide").css("display","none")});
        }
    }
    
    
    $( ".prod_wrapper li .prod_node .featured_img .prod_top" ).draggable({ revert: "invalid", helper: "clone",
        start:function (){
            $(".int_fitting_room").zIndex("-1");
            var prod_h = $(this).parent().find(".prod_details .prod_height").attr("value");
            var prod_w = $(this).parent().find(".prod_details .prod_width").attr("value");
        $( "#top_dropable").removeClass("hide").css("display","block").addClass("top_active").css({height: prod_h, width: prod_w, left: (117 - (prod_w / 2))});
           
        },
        drag:function(){
        },
        stop:function (){
            $( "#top_dropable").removeClass("top_active");
            $(".int_fitting_room").zIndex("0");
        }
    });
    

    
    
    
    /// Dropable ///
    $( "#top_dropable" ).droppable({
        accept: ".prod_wrapper li .prod_node .featured_img .prod_top",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            $(this).fadeOut(300, function (){
                    var apply_prod = ui.draggable.attr("src").match(/(\w*)\.\w{3,4}$/)[1];
                    apply_prod = apply_prod + "_apply.png";
                    $(this).html("<img class='curr_prod' src='{{ asset('bundles/lovethatfit/site/products/tops/') }}"+apply_prod+"' />").fadeIn(300);
                    

                    $("#"+this.id+" img").draggable({
                        start: function(){
                        },
                        drag: function(){
                            product_drag_limit_check(this);
                        },
                        stop: function() {
                            remove_product_applied(this);
                           
                        }
                    });
                    
                    
                });
            
            //alert($(this).find("img").attr("src").match(/(\w*)\.\w{3,4}$/)[1]);
 
    }
    });
    
    
    $( ".prod_wrapper li .prod_node .featured_img .prod_bottom" ).draggable({ revert: "invalid", helper: "clone",
        start:function (){
            var prod_h = $(this).parent().find(".prod_details .prod_height").attr("value");
            var prod_w = $(this).parent().find(".prod_details .prod_width").attr("value");
            $(".int_fitting_room").zIndex("-1");
        $( "#bottom_dropable").removeClass("hide").css("display","block").addClass("top_active").css({height: prod_h, width: prod_w, left: (117 - (prod_w / 2))});
            
        },
        drag:function(){
        },
        stop:function (){
            $( "#bottom_dropable").removeClass("top_active");
            $(".int_fitting_room").zIndex("0");
        }
    });
    
    /// Dropable ///
    $( "#bottom_dropable" ).droppable({
        accept: ".prod_wrapper li .prod_node .featured_img .prod_bottom",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            $(this).fadeOut(300, function (){
                    var apply_prod = ui.draggable.attr("src").match(/(\w*)\.\w{3,4}$/)[1];
                    apply_prod = apply_prod + "_apply.png";
                    $(this).html("<img class='curr_prod' src='{{ asset('bundles/lovethatfit/site/products/bottoms/') }}"+apply_prod+"' />").fadeIn(300);
                
                //alert($( '#bottom_dropable' ).offset().left + "***" + $( '#bottom_dropable' ).parent().offset().left);
                
                $("#"+this.id+" img").draggable({
                        start: function(){
                        },
                        drag: function(){
                            product_drag_limit_check(this);
                        },
                        stop: function() {
                            remove_product_applied(this);
                           
                        }
                    });
                
               }); 
            //alert($(this).find("img").attr("src").match(/(\w*)\.\w{3,4}$/)[1]);
     }
    });
    
    
    $( ".prod_wrapper li .prod_node .featured_img .prod_full" ).draggable({ revert: "invalid", helper: "clone",
        start:function (){
            var prod_h = $(this).parent().find(".prod_details .prod_height").attr("value");
            var prod_w = $(this).parent().find(".prod_details .prod_width").attr("value");
            $(".int_fitting_room").zIndex("-1");
        $( "#full_dropable").removeClass("hide").css("display","block").addClass("top_active").css({height: prod_h, width: prod_w, left: (117 - (prod_w / 2))});
            
        },
        drag:function(){
        },
        stop:function (){
            $( "#full_dropable").removeClass("top_active");
            $(".int_fitting_room").zIndex("0");
        }
    });
    
    /// Dropable ///
    $( "#full_dropable" ).droppable({
        accept: ".prod_wrapper li .prod_node .featured_img .prod_full",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            $(this).fadeOut(300, function (){
                    var apply_prod = ui.draggable.attr("src").match(/(\w*)\.\w{3,4}$/)[1];
                    apply_prod = apply_prod + "_apply.png";
                    $(this).html("<img class='curr_prod' src='{{ asset('bundles/lovethatfit/site/products/dress/') }}"+apply_prod+"' />").fadeIn(300);
                    
                    $("#"+this.id+" img").draggable({
                        start: function(){
                        },
                        drag: function(){
                            product_drag_limit_check(this);
                        },
                        stop: function() {
                            remove_product_applied(this);
                           
                        }
                    });
                });
                
                
                
                
                
            //alert($(this).find("img").attr("src").match(/(\w*)\.\w{3,4}$/)[1]);
 
    }
    });
    
    
    
    
    
    
    </script>
{% endblock %}